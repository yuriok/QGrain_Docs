---
title: Dataset Viewer
date: 2021-05-20 22:45:24
---

This module is designed to provide the basic anlysis and visualization for a brief view of the dataset.

![The screenshot of Dataset Viewer's interface](/images/dataset_viewer.png)

Click the `Dataset Viewer` button in the `Console` interface of QGrain, you will see a new window like above. Its main content is a table to display the statistic parameters and classification groups.`Right Click` the table region, a menu showing the available actions will be popped up.

## Load dataset

To take a example, we will load a artificial dataset which was generated by our [`Dataset Generator`](./dataset_generator) module, you can download it from [here](/datasets/artificial_dataset_example.xlsx). By clicking the `Load Dataset` action in the menu, you will see a dialog to ask you to select filename, choose sheet, and assign the rows and columns. By clicking the `Select` button to select the dataset file to load. At present, we support `*.csv`, `*.xls` and `*.xlsx` formats. For Excel files, one file can contain multiple sheets, it's suitable for placing related but different type of information in different sheets and in the same file. For example, the ouput files of QGrain usually put a `README` sheet to give a brief description of this file, and put the data sheet(s) after this sheet. Here, we need to choose the `Dataset` sheet. By default, it will load the first row as the grain-size classes, and the first column is used to put the names of samples, grain-size distributions (GSDs) are tight with the classes and names. The default output layout of QGrain is correct, so, just click the `Try Load` button. If your dataset does not follow this data layout, i.e., it has additional rows or columns, you can change the settings to load them. Considering the complexity, we only support the horizontal layout (i.e., each row is one sample). If your dataset is vertical (i.e., each column is one sample), it's easy to transform it using other software (e.g. Microsoft Excel).

Indeed, loading a dataset may be the most error-prone process, the loading process will be displayed in the text browser to help users to check the error more easily. **Note: although we have wrote some codes to validate the data, but there may still be some omissive errors passed the validation.**

![The screenshot of Dataset Viewer's interface](/images/dataset_viewer_load.png)

## Basic operation

After loading this dataset, you can see there are statistic parameters and classification groups in the table. You can resize the window or adjust the sliders to see more information. To keep it simple and efficient, all samples have been divided into several pages, each page shows 20 samples. By clicking the `Previous` or `Next` button, you can jump to the previous or next page. You also can click the combo box to select a page directly. At below, there are two check boxes to adjust the method which is used to calculate the statistic parameters. Another combo box is used to ajust the grades of proportions. **Note: these three options not only affect the table view but also affect the output file of `Save Summary` action.** Yes, by clicking `Save Summary` action, you can save the parameters and groups to a Excel file. You can click [here](/datasets/summary_artificial_dataset_example.xlsx) to download it to have a look.

## Plot chart

Many basic charts are built-in in this module, including cumulative curve chart, frequency curve chart, frequency 3D chart, Folk (1954)'s classification diagrams, and Blott & Pye (2012)'s classification diagrams.

By right clicking the table, you can see these plotting actions. To be more flexible, each chart provides four sub-actions.

* `Plot Selected Samples`: Clear previous samples in the chart, and plot selected samples.
* `Append Selected Samples`: Append selected samples to the chart.
* `Plot All Samples`: Clear previous samples in the chart, and plot all samples in current dataset.
* `Append All Samples`: Append all samples in current dataset to the chart.

![The screenshot of plotting a chart](/images/dataset_viewer_plot.png)

The charts are based on the well-known visualization module [Matplotlib](https://matplotlib.org/), and use the style module [SciencePlot](https://github.com/garrettj403/SciencePlots) to refine its appearances. Matplotlib provides a navigation toolbar to adjust the figure, e.g., zoom figure; adjust figure layout; edit title, labels and line styles. With this toolbar, most common requirements could be satisfied. If you are not satisfied with it, you can output the data and use familiar tools to plot charts. In principle, all data in QGrain should be designed exportable, if you can not output what you need, feel free to contact the [author](mailto:liuyuming@ieecas.cn). Most bitmap (e.g., `*.png`, `*.jpg`) and vectorgraph (`*.svg`) formats are supported. It's recommended to save it as a `svg` file, and use other software (e.g., Adobe Illustrator) to edit and output other formats (e.g., `*.eps` and `*.tiff`) for print and publication.

### Cumulative curve

![The screenshot of cumulative curve chart](/images/cumulative_curve.png)

### Frequency curve

![The screenshot of frequency curve chart](/images/frequency_curve.png)

### Frequency 3D

![The screenshot of frequency 3D chart](/images/frequency_3d.png)

### GSM diagram of Folk (1954)

![The screenshot of Folk (1954)'s GSM diagram](/images/folk54_gsm.png)

### SSC diagram of Folk (1954)

![The screenshot of Folk (1954)'s SSC diagram](/images/folk54_ssc.png)

### GSM diagram of Blott & Pye (2012)

![The screenshot of Blott & Pye (2012)'s GSM diagram](/images/bp12_gsm.png)

### SSC diagram of Blott & Pye (2012)

![The screenshot of Blott & Pye (2012)'s SSC diagram](/images/bp12_ssc.png)

## A case to plot the SSC diagram of multiple datasets

Here, we give a example to show that how to plot a Blott & Pye (2012)'s SSC diagram of several Chinese loess datasets. The scatter points of same datasets should have the same style, and styles of different datasets should be different.

1. At first, we have tidied up the GSDs of different profiles to one Excel file under the sample data layout.

2. And then, we loaded one sheet (i.e., the GSDs of one profile), right clicked the table and select the `Append All Samples` sub-action to plot all samples of this profile. We used the same method to process other datasets. Finally, the Blott & Pye (2012)'s SSC diagram looks like below.

    ![The Blott & Pye (2012)'s SSC diagram of Chinese loess (before)](/images/clp_ssc_case_1.svg)

3. Clicked the `Edit` button in the toolbar, clicked the `Curves` tab in the popped dialog, there were the curves in the figure. Edit the styles of last several lines. Finally, the Blott & Pye (2012)'s SSC diagram looks like below.

    ![The Blott & Pye (2012)'s SSC diagram of Chinese loess (after)](/images/clp_ssc_case_2.svg)

4. Save the figure.
